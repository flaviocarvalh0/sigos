<app-form-layout
  [form]="formAparelho"
  [titulo]="cardTitle"
  [auditoriaData]="auditoria"
  [isLoading]="isLoading"
  [isFormInvalid]="formAparelho.invalid"
  [isFormPristine]="formAparelho.pristine"
  [isEditMode]="isEditando"
  (save)="onSubmit()"
  (cancel)="onHandleCancelar()"
>
  <div [formGroup]="formAparelho">
    <div class="row">
      <!-- Cliente -->
      <div class="col-md-6 mb-3">
        <label>
          Cliente
          <span *ngIf="formAparelho.get('idCliente')?.invalid" class="text-danger">*</span>
        </label>
        <ng-select
          [items]="clientes"
          bindLabel="descricao"
          bindValue="id"
          formControlName="idCliente"
          [ngClass]="{ 'is-invalid': isInvalid('idCliente') }"
        ></ng-select>
        <div *ngIf="isInvalid('idCliente')" class="invalid-feedback d-block">
          Campo obrigatório.
        </div>
      </div>

      <!-- Marca -->
      <div class="col-md-6 mb-3">
        <label>
          Marca
          <span *ngIf="formAparelho.get('idMarca')?.invalid" class="text-danger">*</span>
        </label>
        <ng-select
          [items]="marcas"
          bindLabel="descricao"
          bindValue="id"
          formControlName="idMarca"
          (change)="onMarcaChange()"
          [ngClass]="{ 'is-invalid': isInvalid('idMarca') }"
        ></ng-select>
        <div *ngIf="isInvalid('idMarca')" class="invalid-feedback d-block">
          Campo obrigatório.
        </div>
      </div>

      <!-- Modelo -->
      <div class="col-md-6 mb-3">
        <label>
          Modelo
          <span *ngIf="formAparelho.get('idModelo')?.invalid" class="text-danger">*</span>
        </label>
        <ng-select
          [items]="modelosFiltrados"
          bindLabel="nome"
          bindValue="id"
          formControlName="idModelo"
          [ngClass]="{ 'is-invalid': isInvalid('idModelo') }"
        ></ng-select>
        <div *ngIf="isInvalid('idModelo')" class="invalid-feedback d-block">
          Campo obrigatório.
        </div>
      </div>

      <!-- IMEI 1 -->
      <div class="col-md-6 mb-3">
        <label>
    IMEI 1
    <span *ngIf="isInvalid('imei1')" class="text-danger">*</span>
  </label>
  <input
    type="text"
    formControlName="imei1"
    class="form-control"
    maxlength="14"
    inputmode="numeric"
    pattern="[0-9]*"
    (keypress)="onKeyPressSomenteNumeros($event)"
    [ngClass]="{ 'is-invalid': isInvalid('imei1') }"
  />
        <div *ngIf="isInvalid('imei1')" class="invalid-feedback d-block">
          IMEI 1 é obrigatório (14 a 15 dígitos).
        </div>
      </div>

      <!-- IMEI 2 -->
      <div class="col-md-6 mb-3">
          <label>
    IMEI 2
    <span *ngIf="isInvalid('imei2')" class="text-danger">*</span>
  </label>
  <input
    type="text"
    formControlName="imei2"
    class="form-control"
    maxlength="14"
    inputmode="numeric"
    pattern="[0-9]*"
    (keypress)="onKeyPressSomenteNumeros($event)"
    [ngClass]="{ 'is-invalid': isInvalid('imei2') }"
  />
        <div *ngIf="isInvalid('imei2')" class="invalid-feedback d-block">
          IMEI 2 deve ter entre 14 e 15 dígitos.
        </div>
      </div>

      <!-- Nº de Série -->
      <div class="col-md-6 mb-3">
        <label>
          Número de Série
          <span *ngIf="formAparelho.get('numeroSerie')?.invalid" class="text-danger">*</span>
        </label>
        <input
          type="text"
          formControlName="numeroSerie"
          class="form-control"
          [ngClass]="{ 'is-invalid': isInvalid('numeroSerie') }"
        />
        <div *ngIf="isInvalid('numeroSerie')" class="invalid-feedback d-block">
          Campo obrigatório.
        </div>
      </div>

      <!-- Cor -->
      <div class="col-md-6 mb-3">
        <label>
          Cor
          <span *ngIf="formAparelho.get('cor')?.invalid" class="text-danger">*</span>
        </label>
        <input
          type="text"
          formControlName="cor"
          class="form-control"
          [ngClass]="{ 'is-invalid': isInvalid('cor') }"
        />
        <div *ngIf="isInvalid('cor')" class="invalid-feedback d-block">
          Campo obrigatório.
        </div>
      </div>

      <!-- Descrição Auxiliar -->
      <div class="col-12 mb-3">
        <label>
          Descrição Auxiliar
          <span *ngIf="formAparelho.get('descricaoAuxiliar')?.invalid" class="text-danger">*</span>
        </label>
        <textarea
          formControlName="descricaoAuxiliar"
          class="form-control"
          [ngClass]="{ 'is-invalid': isInvalid('descricaoAuxiliar') }"
        ></textarea>
        <div *ngIf="isInvalid('descricaoAuxiliar')" class="invalid-feedback d-block">
          Campo obrigatório.
        </div>
      </div>

      <!-- Observações -->
      <div class="col-12 mb-3">
        <label>
          Observações
          <span *ngIf="formAparelho.get('observacoes')?.invalid" class="text-danger">*</span>
        </label>
        <textarea
          formControlName="observacoes"
          class="form-control"
          [ngClass]="{ 'is-invalid': isInvalid('observacoes') }"
        ></textarea>
        <div *ngIf="isInvalid('observacoes')" class="invalid-feedback d-block">
          Campo obrigatório.
        </div>
      </div>
    </div>
  </div>
</app-form-layout>
